<%- include("partials/header") %>

    <main role="main" class="container">
        <div class="row">
            <div class="col-md-9 verticle-line">
                <article class="media">
                    <img class="rounded-circle article-img" src="/media/default_profile.jpg">
                    <div class="media-body">
                        <div class="article-metadata">
                            <a style="color: #626ee3;" class="mr-2">
                                <%= question.owner %>
                            </a>
                            <% const options = { year: 'numeric', month: 'long', day: 'numeric' }; %>
                            <small class="text-muted"><%= question.postedDate.toLocaleDateString("en-US", options) %></small>
                        </div>
                        <h2>
                            <h3 href="/question/<%=question._id %>">
                                <%= question.ques %>
                            </h3>
                        </h2>
                    </div>

                </article><br>

                <a class="btn bg-blue text-white mybtn" href="/question/answer/<%= question._id %>">Answer</a>


                <hr>
                <% answers.forEach(answer => { %>
                    <div class="content-section">

                        <article class="media">
                            <img class="rounded-circle article-img" src="/media/default_profile.jpg">
                            <div class="media-body">
                                <div class="article-metadata border-bottom">
                                    <a style="color: #626ee3;" class="mr-2">
                                        <%= answer.answeredBy %>
                                    </a>
                                    <% const options = { year: 'numeric', month: 'long', day: 'numeric' }; %>
                                    <small class="text-muted"><%= answer.postedDate.toLocaleDateString("en-US", options) %></small>
                                </div>
                                <p>Ratings: ⭐⭐⭐⭐⭐</p>
                                <div>
                                    <%- answer.answer %>
                                </div>
                            </div>
                        </article><hr>
                        <div class="row">
                            <div class="col">
                                <form>

                                    <button data-toggle="tooltip" data-placement="top" title="Upvote" class="btn trans" name="like" value="<%= answer._id %>">
                                        <i class="comment-icons far fa-thumbs-up"></i> 0
                                    </button>
                                    <button data-toggle="tooltip" data-placement="top" title="Downvote" class="btn trans" name="dislike" value="<%= answer._id %>"><i id="dislike" class="comment-icons far fa-thumbs-down"></i> 0</button>
                                </form>
                            </div>
                            <div>
                                <button data-toggle="tooltip" data-placement="left" title="Comments" onclick="commentToogle(this.name)" name="comment-section-<%= answer._id %>" class="mr-2 btn trans"><i class="comment-icons far fa-comment-alt"></i></button>
                                <a class="float-right btn btn-sm mr-3 bg-red text-white" href="report/<%= answer._id %>">Report</a>

                            </div>


                        </div>

                        <div style="display: none;" id="comment-section-<%= answer._id  %>" class="mt-3 content-section">
                            <div class="container">
                                <br>
                                <h5>Comments</h5>
                                <form action="/question/answer/comments/<%= question._id %> " method="POST">
                                    <div class="form-row">
                                        <div class="col">
                                            <input class="form-control mr-2 btn-sm" placeholder="Write your comment here." type="text" name="comment" id="">
                                        </div>
                                        <div class="col">
                                            <button name="commentbtn" type="submit" class="btn bg-blue text-white mybtn btn-sm" value="<%= answer._id %>">Comment</button>
                                        </div>
                                    </div>

                                </form>
                                <hr>


                                    <% answer.comments.forEach(comment => { %>
                                        <a style="color: #626ee3;" class="mr-2"><%= comment.commentedBy %></a>
                                        <small class="text-muted"></small>
                                        <p class="ml-2">
                                            <%= comment.comment %>
                                        </p>
                                        <% }); %>

                                <br>
                            </div>
                        </div>
                    </div>

                    <% }); %>


            </div>


            <div class="col-md-3">
                <div class="">
                    <h4>Related Questions</h4>
                    <hr>

                    <% rel_ques.forEach(rel => { %>
                        <a href="/question/<%= rel._id %>" style="width: 100%;" class="cat-font"><%= rel.ques %></a><br><br>
                    <% }) %>

                </div>
            </div>

        </div>


        <br>
    </main>
    <%- include("partials/footer") -%>
